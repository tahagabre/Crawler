<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Crawler</title>
    <script src="lib/phaser.2.6.1.min.js" type="text/javascript"></script>
    <script src="lib/box2d-plugin-full.min.js" type="text/javascript"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>
    <!--<script src="app.js" type="text/javascript"></script> -->
    <script type="text/javascript">
var game = new Phaser.Game(800, 600, Phaser.AUTO, '', {
    preload: preload, 
    create: create, 
    update: update
});   

var player;

//Player Constants
PLAYER_HEALTH = 100;
PLAYER_ENERGY = 0;

Player = function( characterSelected ) {
    this.health = PLAYER_HEALTH;
    this.energy = PLAYER_ENERGY;
    this.sprite = "./assets/ball.png";
    game.physics.arcade.enable( this );
    this.inputEnabled = true;
    //this.body.collideWorldBounds = true;
};

Player.prototype.constructor = Player;

Player.prototype.walk = function (){
    if ( game.pointer.isDown) {
        this.body.velocity.x = game.pointer.position.x;
    }
};

Enemy = function( enemyType ) {
    this.health = PLAYER_HEALTH / 2; 
};

Enemy.prototype.constructor = Enemy;

Wall = function( xPosition, yPosition ){
    this.x = xPosition;
    this.y = yPosition;
    this.spriteSrc = "./assets/dude.png";
};

Wall.prototype.constructor = Wall;

//Room Constants
ROOM_WIDTH = 800;
ROOM_LENGTH = 800;

Room = function( isBossRoom ) {
    this.dimensions = {
        x: ROOM_WIDTH,
        y: ROOM_LENGTH
    };
    this.hasEnemies = true;
    this.isLocked = false;
    this.hasTreasure = false;
    this.isBossRoom = isBossRoom;
};

Room.prototype.constructor = Room;

Collectable = function( collectType ) {
    this.position = {
        x: null,
        y: null
    };
    this.collectType = collectType;    
};

Collectable.prototype.constructor = Collectable;

function preload() {
    game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
    game.scale.pageAlignHorizontally = true;
    game.scale.pageAlignVertically = true;
    game.stage.backgroundColor = '#eee';

    game.load.spritesheet('player', './assets/sheet_hero_idle.png', 64, 64);
}

function create() {
    //Enable Physics on the world
    game.physics.startSystem( Phaser.Physics.ARCADE );

    //Create instance of player
    player = new Player("Wok");
    wall = new Wall(100, 100);

    //Create sprite, animation and play
    player = game.add.sprite(game.world.centerX, game.world.centerY, 'player');
    var idle = player.animations.add( 'idle' );
    player.animations.play('idle', 10, true);

    //Create group for things that are unpassable
    obstacles = game.add.group();
    obstacles.enableBody = true;

    game.input.touch.enable = true;
    //obstacles.create()
}
    
function update() {
    var hitObstacle = game.physics.arcade.collide(player, obstacles); //needs to be tested
    
    //player.body.velocity.x = 0;

    if ( false ) { //constantly alerts, shouldn't
        //player.body.velocity.x = game.input.position.x;
        console.log("read input");
    }
}
    </script>
</body>
</html>